{
  "hash": "aceaee4014e7d7a4f8e587f59e494bb3",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Exploring New South Wales II\"\nsubtitle: \"Using NSW spatial service layers in python\"\nauthor: \"José R. Ferrer-Paris\"\ndate: \"2024-05-26\"\ncategories: [WMTS, python, folium, Australia]\nfrom: markdown+emoji\neditor_options: \n  chunk_output_type: console\nengine: jupyter\n---\n\n::: {#3e121374 .cell execution_count=1}\n``` {.python .cell-code}\nimport folium\nfrom folium.raster_layers import WmsTileLayer\nfrom folium.raster_layers import TileLayer\n\nwms_src = \"https://mapprod2.environment.nsw.gov.au/arcgis/services/UHGC/UHGC/MapServer/WMSServer?\"\nwms_layers = \"0\"\n\n# Build a request for the server\nNSW_historical_src = \"image/jpgpng:https://portal.spatial.nsw.gov.au/tileservices/Hosted/HistoricalImagery1947/MapServer/WMTS/tile/1.0.0/{layer}/default/{tileMatrixSet}/{z}/{y}/{x}\"\n# Don't forget the attribution\nattrib_string = \" © State of New South Wales, Department of Customer Service, Spatial Services\"\n\n\n\nfolium_map = folium.Map(location=[-33.867, 151.21], \n                    zoom_start=13)\n                    \nTileLayer(\n    tiles='CartoDB dark_matter', name='CartoDB dark_matter'\n).add_to(folium_map)\n\nTileLayer(\n    tiles='https://gibs-{s}.earthdata.nasa.gov/wmts/epsg3857/best/'\n    + '{layer}/default/{time}/{tileMatrixSet}/{z}/{y}/{x}.jpg',\n    subdomains='abc',\n    name='GIBS',\n    attr='NASA GIBS',\n    overlay=True,\n    layer='MODIS_Terra_CorrectedReflectance_TrueColor',\n    tileMatrixSet='GoogleMapsCompatible_Level9',\n    time='2019-11-09',\n    tileSize=256,\n).add_to(folium_map)\n\nTileLayer(\n  tiles = \"http://maps.six.nsw.gov.au/arcgis/rest/services/public/NSW_Base_Map/MapServer/WMTS?Service=WMTS&Request=GetTile&Version=1.0.0&Style=default&tilematrixset=default028mm&Format=image/png&layer=public_NSW_Base_Map&TileMatrix={z}&TileRow={y}&TileCol={x}\",\n  attr=attrib_string,\n    overlay=True,\n    show=True,\n    name = 'NSW basemap').add_to(folium_map)\n    \nTileLayer(\n      tiles = \"https://portal.spatial.nsw.gov.au/tileservices/Hosted/HistoricalImagery1947/MapServer/WMTS?Service=WMTS&Request=GetTile&Version=1.0.0&crs=EPSG:3857&Style=default&tilematrixset=default028mm&Format=image/jpgpng&layer=HistoricalImagery1947&TileMatrix={z}&TileRow={y}&TileCol={x}\",\n    attr=attrib_string,\n    overlay=True,\n    show=True,\n    name = 'historical 1947',\n    layer='HistoricalImagery1947',\n    tileMatrixSet='default028mm',\n    tileSize=256,\n).add_to(folium_map)\n\nWmsTileLayer(url = wms_src,\n            layers = wms_layers,\n            transparent = True, \n            control = True,\n            fmt=\"image/png\",\n            name = 'Tree cover',\n            overlay = True,\n            show = True,\n            ).add_to(folium_map)\n\nfolium.LayerControl().add_to(folium_map)\n\nfolium_map\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    \n        &lt;script&gt;\n            L_NO_TOUCH = false;\n            L_DISABLE_3D = false;\n        &lt;/script&gt;\n    \n    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;\n    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_b05738a59267c7a26916afdc683ba4ed {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_b05738a59267c7a26916afdc683ba4ed&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_b05738a59267c7a26916afdc683ba4ed = L.map(\n                &quot;map_b05738a59267c7a26916afdc683ba4ed&quot;,\n                {\n                    center: [-33.867, 151.21],\n                    crs: L.CRS.EPSG3857,\n                    zoom: 13,\n                    zoomControl: true,\n                    preferCanvas: false,\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_97d2ffcda969009ddcd2afd52ebfb734 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {&quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}\n            );\n        \n    \n            tile_layer_97d2ffcda969009ddcd2afd52ebfb734.addTo(map_b05738a59267c7a26916afdc683ba4ed);\n        \n    \n            var tile_layer_05e789d044906ce8508685425e5e768a = L.tileLayer(\n                &quot;https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png&quot;,\n                {&quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors \\u0026copy; \\u003ca href=\\&quot;https://carto.com/attributions\\&quot;\\u003eCARTO\\u003c/a\\u003e&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 20, &quot;maxZoom&quot;: 20, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abcd&quot;, &quot;tms&quot;: false}\n            );\n        \n    \n            tile_layer_05e789d044906ce8508685425e5e768a.addTo(map_b05738a59267c7a26916afdc683ba4ed);\n        \n    \n            var tile_layer_f5f4821ac5567ec6b3a941d0d20febb8 = L.tileLayer(\n                &quot;https://gibs-{s}.earthdata.nasa.gov/wmts/epsg3857/best/{layer}/default/{time}/{tileMatrixSet}/{z}/{y}/{x}.jpg&quot;,\n                {&quot;attribution&quot;: &quot;NASA GIBS&quot;, &quot;detectRetina&quot;: false, &quot;layer&quot;: &quot;MODIS_Terra_CorrectedReflectance_TrueColor&quot;, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tileMatrixSet&quot;: &quot;GoogleMapsCompatible_Level9&quot;, &quot;tileSize&quot;: 256, &quot;time&quot;: &quot;2019-11-09&quot;, &quot;tms&quot;: false}\n            );\n        \n    \n            tile_layer_f5f4821ac5567ec6b3a941d0d20febb8.addTo(map_b05738a59267c7a26916afdc683ba4ed);\n        \n    \n            var tile_layer_9e9173b873ff36a5cfd0dc9d762024ac = L.tileLayer(\n                &quot;http://maps.six.nsw.gov.au/arcgis/rest/services/public/NSW_Base_Map/MapServer/WMTS?Service=WMTS\\u0026Request=GetTile\\u0026Version=1.0.0\\u0026Style=default\\u0026tilematrixset=default028mm\\u0026Format=image/png\\u0026layer=public_NSW_Base_Map\\u0026TileMatrix={z}\\u0026TileRow={y}\\u0026TileCol={x}&quot;,\n                {&quot;attribution&quot;: &quot; \\u00a9 State of New South Wales, Department of Customer Service, Spatial Services&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}\n            );\n        \n    \n            tile_layer_9e9173b873ff36a5cfd0dc9d762024ac.addTo(map_b05738a59267c7a26916afdc683ba4ed);\n        \n    \n            var tile_layer_6b2b93026c4f76a3ce81038a15b3fb07 = L.tileLayer(\n                &quot;https://portal.spatial.nsw.gov.au/tileservices/Hosted/HistoricalImagery1947/MapServer/WMTS?Service=WMTS\\u0026Request=GetTile\\u0026Version=1.0.0\\u0026crs=EPSG:3857\\u0026Style=default\\u0026tilematrixset=default028mm\\u0026Format=image/jpgpng\\u0026layer=HistoricalImagery1947\\u0026TileMatrix={z}\\u0026TileRow={y}\\u0026TileCol={x}&quot;,\n                {&quot;attribution&quot;: &quot; \\u00a9 State of New South Wales, Department of Customer Service, Spatial Services&quot;, &quot;detectRetina&quot;: false, &quot;layer&quot;: &quot;HistoricalImagery1947&quot;, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tileMatrixSet&quot;: &quot;default028mm&quot;, &quot;tileSize&quot;: 256, &quot;tms&quot;: false}\n            );\n        \n    \n            tile_layer_6b2b93026c4f76a3ce81038a15b3fb07.addTo(map_b05738a59267c7a26916afdc683ba4ed);\n        \n    \n            var macro_element_ae1a8552825191c6819148213d11a845 = L.tileLayer.wms(\n                &quot;https://mapprod2.environment.nsw.gov.au/arcgis/services/UHGC/UHGC/MapServer/WMSServer?&quot;,\n                {&quot;attribution&quot;: &quot;&quot;, &quot;format&quot;: &quot;image/png&quot;, &quot;layers&quot;: &quot;0&quot;, &quot;styles&quot;: &quot;&quot;, &quot;transparent&quot;: true, &quot;version&quot;: &quot;1.1.1&quot;}\n            );\n        \n    \n            macro_element_ae1a8552825191c6819148213d11a845.addTo(map_b05738a59267c7a26916afdc683ba4ed);\n        \n    \n            var layer_control_62dc29010fb0b68cad4b3453df770ab9_layers = {\n                base_layers : {\n                    &quot;openstreetmap&quot; : tile_layer_97d2ffcda969009ddcd2afd52ebfb734,\n                    &quot;CartoDB dark_matter&quot; : tile_layer_05e789d044906ce8508685425e5e768a,\n                },\n                overlays :  {\n                    &quot;GIBS&quot; : tile_layer_f5f4821ac5567ec6b3a941d0d20febb8,\n                    &quot;NSW basemap&quot; : tile_layer_9e9173b873ff36a5cfd0dc9d762024ac,\n                    &quot;historical 1947&quot; : tile_layer_6b2b93026c4f76a3ce81038a15b3fb07,\n                    &quot;Tree cover&quot; : macro_element_ae1a8552825191c6819148213d11a845,\n                },\n            };\n            let layer_control_62dc29010fb0b68cad4b3453df770ab9 = L.control.layers(\n                layer_control_62dc29010fb0b68cad4b3453df770ab9_layers.base_layers,\n                layer_control_62dc29010fb0b68cad4b3453df770ab9_layers.overlays,\n                {&quot;autoZIndex&quot;: true, &quot;collapsed&quot;: true, &quot;position&quot;: &quot;topright&quot;}\n            ).addTo(map_b05738a59267c7a26916afdc683ba4ed);\n\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}