{
  "hash": "f8da1cb816863ffec8eb187b6b6af33f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"iNaturalist: my observations from around the world\"\nauthor: \"José R. Ferrer-Paris\"\ndate: \"2024-05-18\"\ncategories: [how2, iNaturalist, API, R code]\n---\n\n\nIt might be nice to share some of my iNaturalist observations in this blog. So I decided to create a backup of observations to quickly add them to my posts.\n\nTo get the data I first install the `rinat` package:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"rinat\")\n```\n:::\n\n\nThen I can download the observations from iNaturalist:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rinat)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nuser_obs <- get_inat_obs_user(\"NeoMapas\",maxresults = 5000)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(user_obs)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 783\nColumns: 37\n$ scientific_name                  <chr> \"Episyrphus viridaureus\", \"Rutilia\", …\n$ datetime                         <chr> \"2024-05-26 11:19:00 +1000\", \"2024-04…\n$ description                      <chr> \"\", \"\", \"\", \"\", \"This was walking so …\n$ place_guess                      <chr> \"Frank Doyle Park, Randwick, NSW, AU\"…\n$ latitude                         <dbl> -33.90830, -33.91018, -33.91976, -33.…\n$ longitude                        <dbl> 151.2416, 151.2383, 151.2601, 141.160…\n$ tag_list                         <chr> \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"…\n$ common_name                      <chr> \"Black-banded Hoverfly\", \"\", \"Superb …\n$ url                              <chr> \"https://www.inaturalist.org/observat…\n$ image_url                        <chr> \"https://inaturalist-open-data.s3.ama…\n$ user_login                       <chr> \"neomapas\", \"neomapas\", \"neomapas\", \"…\n$ id                               <int> 218262562, 211230093, 208409105, 2082…\n$ species_guess                    <chr> \"\", \"Rutilia\", \"Superb Fairywren\", \"B…\n$ iconic_taxon_name                <chr> \"Insecta\", \"Insecta\", \"Aves\", \"Insect…\n$ taxon_id                         <int> 363758, 341840, 12065, 543672, 748062…\n$ num_identification_agreements    <int> 0, 1, 2, 1, 1, 0, 1, 1, 1, 1, 2, 2, 1…\n$ num_identification_disagreements <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ observed_on_string               <chr> \"2024-05-26 11:19:00+10:00\", \"2024-04…\n$ observed_on                      <chr> \"2024-05-26\", \"2024-04-29\", \"2024-04-…\n$ time_observed_at                 <chr> \"2024-05-26 01:19:00 UTC\", \"2024-04-2…\n$ time_zone                        <chr> \"Sydney\", \"Sydney\", \"Sydney\", \"Sydney…\n$ positional_accuracy              <int> 4, 3, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ public_positional_accuracy       <int> 4, 3, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ geoprivacy                       <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ taxon_geoprivacy                 <chr> \"\", \"\", \"open\", \"\", \"\", \"\", \"\", \"open…\n$ coordinates_obscured             <chr> \"false\", \"false\", \"false\", \"false\", \"…\n$ positioning_method               <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ positioning_device               <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ user_id                          <int> 74355, 74355, 74355, 74355, 74355, 74…\n$ user_name                        <chr> \"JR Ferrer-Paris\", \"JR Ferrer-Paris\",…\n$ created_at                       <chr> \"2024-05-26 01:22:36 UTC\", \"2024-04-2…\n$ updated_at                       <chr> \"2024-05-26 01:23:00 UTC\", \"2024-05-0…\n$ quality_grade                    <chr> \"needs_id\", \"needs_id\", \"research\", \"…\n$ license                          <chr> \"CC-BY\", \"CC-BY\", \"CC-BY\", \"CC-BY\", \"…\n$ sound_url                        <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ oauth_application_id             <int> 3, 3, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ captive_cultivated               <chr> \"false\", \"false\", \"false\", \"false\", \"…\n```\n\n\n:::\n:::\n\n\nNow I have a collection of photos in R and I can select one by title or any other criteria:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nselected_photo <- slice(user_obs, 500)\n```\n:::\n\n\nAnd combine the R and markdown magic to show the photo in this document:\n\n\n\n```{.r .cell-code}\nphoto_md <- sprintf(\n  \"![*%s* observed in %s by %s@iNaturalist](%s){.preview-image .lightbox}\",\n  selected_photo$species_guess,\n  selected_photo$place_guess,\n  selected_photo$user_login,\n  selected_photo$image_url\n)\n\ncat(photo_md)\n```\n\n![*White-necked Raven* observed in Mount Sabyinyo, Congo - Kinshasa by neomapas@iNaturalist](https://inaturalist-open-data.s3.amazonaws.com/photos/293600812/medium.jpeg){.preview-image .lightbox}\n\n\nIf I want to save the information for future use in my blog, I need first to create a folder to hold the file, and then save the R object into an RDS file. Like this:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhere::i_am(\"posts/foto-collection.qmd\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nhere() starts at /Users/z3529065/proyectos/personal/spatial-one\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_dir <- here::here(\"Rdata\")\nfile_name <- here::here(\"Rdata\",\"iNaturalist-obs-NeoMapas.rds\")\nsaveRDS(file=file_name, user_obs)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}